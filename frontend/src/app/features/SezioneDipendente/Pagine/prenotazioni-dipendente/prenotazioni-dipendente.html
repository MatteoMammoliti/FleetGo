<app-template-titolo-sottotitolo
  [titolo]="'Le mie Prenotazioni'"
  [sottotitolo]="'Gestisci e monitora lo stato dei tuoi noleggi aziendali!'">

  <div class="contenitore-filtri">
    <div class="lista-filtri">

      <app-bottone-pillola
        [label]="'Tutte'" [attivo]="filtroAttivo === 'Tutte'" [variante]="'blu'"
        (clickBtn)="impostaFiltro('Tutte')">
      </app-bottone-pillola>

      <app-bottone-pillola
        [label]="'In attesa'" [attivo]="filtroAttivo === 'In attesa'" [variante]="'giallo'"
        (clickBtn)="impostaFiltro('In attesa')">
      </app-bottone-pillola>

      <app-bottone-pillola
        [label]="'Da ritirare'" [attivo]="filtroAttivo === 'Da ritirare'" [variante]="'viola'"
        (clickBtn)="impostaFiltro('Da ritirare')">
      </app-bottone-pillola>

      <app-bottone-pillola
        [label]="'In corso'" [attivo]="filtroAttivo === 'In corso'" [variante]="'verde'"
        (clickBtn)="impostaFiltro('In corso')">
      </app-bottone-pillola>

      <app-bottone-pillola
        [label]="'Terminate'" [attivo]="filtroAttivo === 'Terminata'" [variante]="'grigio'"
        (clickBtn)="impostaFiltro('Terminata')">
      </app-bottone-pillola>

      <app-bottone-pillola
        [label]="'Rifiutate'" [attivo]="filtroAttivo === 'Rifiutate'" [variante]="'rosso'"
        (clickBtn)="impostaFiltro('Rifiutate')">
      </app-bottone-pillola>

    </div>
  </div>

  <div class="contenitore-prenotazioni">

    @if (caricamentoDati) {
      <div class="contenitore-caricamento">
        <i class="caricamento bi bi-arrow-clockwise"></i>
      </div>
    } @else {

      @if (prenotazioniFiltrate.length > 0) {

        <div class="griglia-prenotazioni animazione-fade">
          @for (prenotazione of prenotazioniFiltrate; track prenotazione.idRichiesta! + filtroAttivo) {
            <div class="wrapper-card">
              <app-prenotazione-card
                class="card-blocco"
                (annullaRichiesta)="apriModaleCheck($event)"
                [prenotazione]="prenotazione">
              </app-prenotazione-card>
            </div>
          }
        </div>

      } @else {

        <div class="card-vuota animazione-fade">

          <app-messaggio-card-vuota
            [icona]="'bi-journal-x'"
            [testoPrimario]="'Nessuna prenotazione ' + (filtroAttivo === 'Tutte' ? '' : filtroAttivo.toLowerCase())"
            [testoSecondario]="'Non sono presenti richieste che corrispondono a questo filtro.'">
          </app-messaggio-card-vuota>

          <div class="contenitore-azioni">
            @if (filtroAttivo === 'Tutte') {
              <button (click)="clickNuovaPrenotazione()" class="bottone-nuova-prenotazione">
                <i class="bi bi-plus-lg text-lg"></i>
                Nuova Prenotazione
              </button>
            } @else {
              <button (click)="impostaFiltro('Tutte')" class="bottone-reset-filtro">
                Mostra Tutte
              </button>
            }
          </div>
        </div>
      }

    }
  </div>

</app-template-titolo-sottotitolo>

@if (erroreBanner) {
  <app-banner-errore [errore]="erroreBanner" (chiudi)="erroreBanner=''"></app-banner-errore>
}
@if (successoBanner) {
  <app-banner-errore [successo]="successoBanner" (chiudi)="successoBanner=''"></app-banner-errore>
}

@if(modaleAnnullaPrenotazione){
  <app-template-finestra-modale
  titolo="Attenzione"
  tastoBlu="Conferma"
  tastoBianco="Annulla"
  (chiudi)="chiudiModaleCheck()"
  (conferma)="confermaModaleCheck()"
  (annulla)="chiudiModaleCheck()"
  >
    <span class="messaggioModaleConferma">Sei sicuro di voler eliminare la richiesta di noleggio?</span>
  </app-template-finestra-modale>
}
