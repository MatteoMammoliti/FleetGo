<app-intestazione-ebackground
  [titolo]="'Le mie Prenotazioni'">
  <div class="pb-20">
    <div class="flex flex-wrap items-center gap-3 mb-8 overflow-x-auto pb-2 scrollbar-hide">

      <app-bottone-pillola
        [label]="'Tutte'"
        [attivo]="filtroAttivo === 'Tutte'"
        [variante]="'blu'"
        (clickBtn)="impostaFiltro('Tutte')">
      </app-bottone-pillola>

      <app-bottone-pillola
        [label]="'In attesa'"
        [attivo]="filtroAttivo === 'In attesa'"
        [variante]="'giallo'"
        (clickBtn)="impostaFiltro('In attesa')">
      </app-bottone-pillola>

      <app-bottone-pillola
        [label]="'Da ritirare'"
        [attivo]="filtroAttivo === 'Da ritirare'"
        [variante]="'viola'"
        (clickBtn)="impostaFiltro('Da ritirare')">
      </app-bottone-pillola>

      <app-bottone-pillola
        [label]="'In corso'"
        [attivo]="filtroAttivo === 'In corso'"
        [variante]="'verde'"
        (clickBtn)="impostaFiltro('In corso')">
      </app-bottone-pillola>

      <app-bottone-pillola
        [label]="'Terminate'"
        [attivo]="filtroAttivo === 'Terminata'"
        [variante]="'grigio'"
        (clickBtn)="impostaFiltro('Terminata')">
      </app-bottone-pillola>

      <app-bottone-pillola
        [label]="'Rifiutate'"
        [attivo]="filtroAttivo === 'Rifiutate'"
        [variante]="'grigio'"
        (clickBtn)="impostaFiltro('Rifiutate')">
      </app-bottone-pillola>

    </div>

    @if (prenotazioniFiltrate.length > 0) {

      <div class="grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-6 animate-fade-in">
        @for (prenotazione of prenotazioniFiltrate; track prenotazione.idRichiesta) {
          <app-prenotazione-card
            class="h-full"
            (annullaRichiesta)="eliminaPrenotazione($event)"
            [prenotazione]="prenotazione">
          </app-prenotazione-card>
        }
      </div>

    } @else {

      <div class="bg-white rounded-3xl p-8 shadow-sm border border-slate-100 flex flex-col items-center animate-fade-in">

        <app-messaggio-card-vuota
          [icona]="'bi-journal-x'"
          [testoPrimario]="'Nessuna prenotazione ' + (filtroAttivo === 'Tutte' ? '' : filtroAttivo)"
          [testoSecondario]="'Non sono presenti richieste che corrispondono a questo filtro.'">
        </app-messaggio-card-vuota>

        <div class="mt-4">
          @if(filtroAttivo === 'Tutte') {
            <button (click)="clickNuovaPrenotazione()"
                    class="px-6 py-3 bg-blu text-white font-bold rounded-xl shadow-lg shadow-blue-100 hover:bg-blue-700 hover:scale-105 transition-all">
              <i class="bi bi-plus-lg mr-2"></i>Nuova Prenotazione
            </button>
          } @else {
            <button (click)="impostaFiltro('Tutte')"
                    class="px-6 py-3 bg-slate-100 text-slate-600 font-bold rounded-xl hover:bg-slate-200 transition-all">
              Mostra Tutte
            </button>
          }
        </div>
      </div>
    }
  </div>
</app-intestazione-ebackground>
