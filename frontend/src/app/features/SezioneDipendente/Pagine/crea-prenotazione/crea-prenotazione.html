<app-intestazione-ebackground [titolo]="'Nuova Prenotazione'">

  <div class="flex flex-col xl:flex-row xl:items-end justify-between gap-6 mb-10">

    <div class="relative z-10 animate-slide-in-left pb-2">
      <p class="text-slate-500 font-medium text-lg tracking-wide max-w-2xl leading-relaxed">
        Cerca il veicolo perfetto per la tua prossima trasferta.
      </p>
    </div>

    <div class="flex flex-col md:flex-row items-end gap-4 relative z-10 animate-slide-in-right w-full xl:w-auto">

      <div class="w-full md:w-auto">
        <app-scelta-tendina
          [titolo]="'LUOGO DI RITIRO'"
          [lista]="listaLuoghi"
          [chiaveVisuale]="'nomeLuogo'"
          [chiaveUtilizzata]="'nomeLuogo'"
          [placeholder]="'Seleziona sede'"
          [valore]="nomeLuogoSelezionato"
          (valoreChange)="nomeLuogoSelezionato = $event; clickCambioLuogo()">
        </app-scelta-tendina>
      </div>

      <div class="w-full md:w-auto">
        <app-filtro-data-ora
          (clickRicerca)="clickApplicaFiltri($event)">
        </app-filtro-data-ora>
      </div>

    </div>
  </div>

  <div class="pb-20 min-h-[500px]">

    @if (caricamentoDati) {
      <div class="flex items-center justify-center h-[400px] w-full">
              <i class="caricamento bi bi-arrow-clockwise"></i>
      </div>
    } 
    @else {
      
      @if (listaVeicoli.length > 0) {
        
        <div class="grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-6 animate-fade-in">
          @for (auto of listaVeicoli; track auto.idVeicolo) {
            <div class="h-full">
              <app-veicolo-card
                class="h-full block"
                [costoStimato]="costoStimato"
                [veicolo]="auto"
                (apriForm)="clickPrenotaOra($event)">
              </app-veicolo-card>
            </div>
          }
        </div>

      } @else {
        
        <div class="bg-white rounded-3xl p-12 shadow-sm border border-slate-100 flex flex-col items-center justify-center text-center animate-fade-in mt-6">
          <app-messaggio-card-vuota
            [icona]="'bi-search'"
            [tagliaIcona]="'3xl'"
            [testoPrimario]="'Nessun veicolo disponibile'"
            [testoSecondario]="'Non abbiamo trovato veicoli disponibili per i criteri selezionati. Prova a cambiare date o sede.'">
          </app-messaggio-card-vuota>
        </div>

      }

    } 
  </div>

</app-intestazione-ebackground>

@if (mostraModale) {
  <app-richiesta-noleggio-form
    (confermaRegistrazione)="inviaPrenotazione($event)"
    [dati]="mostraModale"
    [costoStimato]="costoStimato"
    (chiudi)="chiudiModale()">
  </app-richiesta-noleggio-form>
}

@if (erroreBanner) {
  <app-banner-errore [errore]="erroreBanner" (chiudi)="erroreBanner=''"></app-banner-errore>
}
@if(successoBanner){
  <app-banner-errore [successo]="successoBanner" (chiudi)="successoBanner=''"></app-banner-errore>
}