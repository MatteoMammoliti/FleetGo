<app-template-titolo-sottotitolo [titolo]="'La tua Azienda'">

  <div class="flex flex-col gap-5 p-6"> 
    
    <div class="bg-gradient-to-br from-slate-50 to-blue-50/50 p-4 rounded-xl border border-slate-200 flex flex-col md:flex-row items-center gap-4 shadow-sm">
      
      <div class="w-14 h-14 bg-white rounded-full flex items-center justify-center shadow-sm border border-slate-100 shrink-0">
        <i class="bi-building text-2xl text-blue-600"></i>
      </div>
      
      <div class="flex-grow text-center md:text-left space-y-0.5">
        <h3 class="text-base font-bold text-slate-800 leading-tight">
          {{ datiAzienda?.nomeAzienda || 'Nessuna azienda' }}
        </h3>
        
        <div class="flex items-center justify-center md:justify-start gap-1.5 text-slate-500 text-xs font-medium">
          <i class="bi bi-geo-alt text-blue-400"></i>
          <span>{{ datiAzienda?.sedeAzienda || 'Sede N/D' }}</span>
        </div>
        
        <div class="flex items-center justify-center md:justify-start gap-1.5 text-slate-500 text-xs font-medium">
          <i class="bi bi-receipt text-blue-400"></i>
          <span>P.IVA: {{ datiAzienda?.pIva || '---' }}</span>
        </div>
      </div>

      <div class="px-3 py-1 bg-green-100 text-green-700 rounded-full text-[10px] font-bold border border-green-200 flex items-center gap-1 shadow-sm whitespace-nowrap">
        <i class="bi-check-circle-fill"></i> AFFILIATO
      </div>
    </div>

    <hr class="border-slate-100">

    <div class="flex flex-col gap-3">
      
      <div class="flex items-start gap-2.5 p-3 bg-red-50 rounded-lg border border-red-100 text-red-800 text-xs">
        <i class="bi-exclamation-triangle-fill text-sm mt-0.5 shrink-0 text-red-500"></i>
        <div>
          <p class="font-bold text-red-700">Attenzione</p>
          <p class="opacity-80 leading-relaxed mt-0.5">
            Disdire l'affiliazione comporta la perdita immediata dell'accesso ai veicoli e cancellazione prenotazioni.
          </p>
        </div>
      </div>
      
      <div class="flex justify-end pt-1"> <button (click)="apriModaleDisdetta()"
                class="group px-4 py-2 bg-white border border-red-200 text-red-600 font-bold text-xs rounded-lg hover:bg-red-600 hover:text-white hover:border-red-600 transition-all shadow-sm hover:shadow-md flex items-center gap-1.5">
          <i class="bi-box-arrow-right text-sm transition-transform group-hover:translate-x-1"></i>
          Disdici Affiliazione
        </button>
      </div>

    </div>

  </div>

</app-template-titolo-sottotitolo>

@if (mostraModaleConferma) {
  <div class="fixed inset-0 z-[100] flex items-center justify-center p-4">
    <div (click)="mostraModaleConferma = false" class="absolute inset-0 bg-slate-900/60 backdrop-blur-sm transition-all"></div>
    
    <div class="relative w-full max-w-md bg-white rounded-2xl shadow-2xl overflow-hidden animate-pop-in">
      <app-template-finestra-modale 
        [titolo]="'Conferma Operazione'" 
        (chiudi)="mostraModaleConferma = false">
        
        <div class="p-6 flex flex-col gap-6">
          <app-messaggio-card-vuota
            [icona]="'bi-exclamation-circle-fill text-red-500'"
            [tagliaIcona]="'text-4xl'" 
            [testoPrimario]="'Vuoi davvero lasciare l\'azienda?'"
            [testoSecondario]="'Verrai disconnesso immediatamente e perderai l\'accesso ai servizi aziendali.'">
          </app-messaggio-card-vuota>

          <div class="flex gap-3 pt-2">
            <button (click)="mostraModaleConferma = false" 
                    class="flex-1 py-3 rounded-xl border border-slate-200 text-slate-600 font-bold hover:bg-slate-50 transition-all">
              Annulla
            </button>
            <button (click)="confermaDisdetta()" 
                    class="flex-1 py-3 rounded-xl bg-red-600 text-white font-bold hover:bg-red-700 shadow-lg shadow-red-100 transition-all">
              Conferma e Esci
            </button>
          </div>
        </div>
      </app-template-finestra-modale>
    </div>
  </div>
}