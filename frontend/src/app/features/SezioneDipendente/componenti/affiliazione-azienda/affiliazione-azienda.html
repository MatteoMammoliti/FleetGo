<div class="bg-white rounded-3xl p-8 shadow-sm flex flex-col gap-8 animate-fade-in border border-slate-100">

  <app-template-titolo-sottotitolo
    [titolo]="'La tua Azienda'">
  </app-template-titolo-sottotitolo>

  <div class="bg-gradient-to-br from-slate-50 to-blue-50/50 p-6 rounded-2xl border border-slate-200 flex flex-col md:flex-row items-center gap-6 shadow-sm">
    <div class="w-20 h-20 bg-white rounded-full flex items-center justify-center shadow-sm border border-slate-100 shrink-0">
      <i class="bi-building text-3xl text-blu"></i>
    </div>
    <div class="flex-grow text-center md:text-left space-y-1">
      <h3 class="text-xl font-bold text-slate-800">{{ datiAzienda?.nomeAzienda || 'Nessuna azienda associata' }}</h3>
      <div class="flex items-center justify-center md:justify-start gap-2 text-slate-500 text-sm">
        <span>{{ datiAzienda?.sedeAzienda || 'Sede non specificata' }}</span>
      </div>
      <div class="flex items-center justify-center md:justify-start gap-2 text-slate-500 text-sm">
        <span>P.IVA: {{ datiAzienda?.pIva || '---' }}</span>
      </div>
    </div>
    <div class="px-4 py-1.5 bg-green-100 text-green-700 rounded-full text-xs font-bold border border-green-200 flex items-center gap-1">
      <i class="bi-check-circle-fill"></i> AFFILIATO
    </div>
  </div>

  <hr class="border-slate-100">

  <div class="flex flex-col gap-4">
    <div class="flex items-start gap-3 p-4 bg-red-50 rounded-xl border border-red-100 text-red-800 text-sm">
      <i class="bi-exclamation-triangle-fill text-xl mt-0.5 shrink-0"></i>
      <div>
        <p class="font-bold">Attenzione</p>
        <p class="opacity-80 leading-relaxed">
          Disdire l'affiliazione comporta la perdita immediata dell'accesso ai veicoli aziendali.
        </p>
      </div>
    </div>
    <div class="flex justify-end">
      <button (click)="apriModaleDisdetta()"
              class="group px-6 py-3 bg-white border-2 border-red-100 text-red-600 font-bold rounded-xl hover:bg-red-600 hover:text-white hover:border-red-600 transition-all shadow-sm flex items-center gap-2">
        <i class="bi-box-arrow-right text-lg transition-transform group-hover:translate-x-1"></i>
        Disdici Affiliazione
      </button>
    </div>
  </div>
</div>

@if (mostraModaleConferma) {
  <div class="fixed inset-0 z-[100] flex items-center justify-center p-4">
    <div (click)="mostraModaleConferma = false" class="absolute inset-0 bg-black/50 backdrop-blur-sm transition-all"></div>
    
    <div class="relative w-full max-w-md bg-white rounded-2xl shadow-2xl overflow-hidden animate-pop-in">
      
      <app-template-finestra-modale 
        [titolo]="'Conferma Operazione'" 
        (chiudi)="mostraModaleConferma = false">
        
        <div class="p-6 flex flex-col gap-6">
          
          <app-messaggio-card-vuota
            [icona]="'bi-exclamation-circle-fill text-red-500'"
            [tagliaIcona]="'4xl'"
            [testoPrimario]="'Vuoi davvero lasciare l\'azienda?'"
            [testoSecondario]="'Verrai disconnesso immediatamente e perderai l\'accesso ai servizi aziendali.'">
          </app-messaggio-card-vuota>

          <div class="flex gap-3 pt-2">
            <button (click)="mostraModaleConferma = false" 
                    class="flex-1 py-3 rounded-xl border border-slate-200 text-slate-600 font-bold hover:bg-slate-50 transition-all">
              Annulla
            </button>
            
            <button (click)="confermaDisdetta()" 
                    class="flex-1 py-3 rounded-xl bg-red-600 text-white font-bold hover:bg-red-700 shadow-md shadow-red-100 transition-all">
              Conferma e Esci
            </button>
          </div>
        </div>
      </app-template-finestra-modale>
    </div>
  </div>
}