<app-template-finestra-modale
  [titolo]="'Richiesta Assistenza'"
  [sottotitolo]="'Apri un ticket per ricevere supporto'"
  [larghezza]="'max-w-xl'"
  [tastoBianco]="'Annulla'"
  [tastoBlu]="'Invia Segnalazione'"
  (chiudi)="chiudiModale.emit()"
  (annulla)="chiudiModale.emit()"
  (conferma)="invio()"> <div class="flex flex-col gap-6">

    <div class="w-full">
      <app-scelta-tendina
        [titolo]="'CATEGORIA'"
        [lista]="categorieContatto"
        [placeholder]="'Seleziona il tipo di problema'"
        [valore]="categoriaSelezionata"
        [haErrore]="erroreCategoria"
        [messaggioErrore]="'Seleziona una categoria'"
        (valoreChange)="cambioCategoria($event)"> </app-scelta-tendina>
    </div>

    @if(listaOggettiDinamicaVisibile) {
      <div class="w-full animate-fade-in">
        @if(caricamentoDati) {
          <div class="h-[42px] w-full bg-slate-100 rounded-xl animate-pulse"></div>
        } @else {
          <app-scelta-tendina
            [titolo]="'RIFERIMENTO NOLEGGIO'"
            [lista]="listaOggettiDinamica"
            [chiaveVisuale]="'labelVisuale'"
            [chiaveUtilizzata]="'labelVisuale'"
            [placeholder]="'Seleziona il noleggio interessato'"
            [valore]="oggettoSelezionato"
            [haErrore]="erroreOggetto"
            [messaggioErrore]="'Seleziona un riferimento'"
            (valoreChange)="cambioOggetto($event)">
          </app-scelta-tendina>
        }
      </div>
    }

    <div class="w-full">
      <app-input-checked
        [titolo]="'MESSAGGIO'"
        [type]="'text'"
        [placeholder]="'Descrivi il problema riscontrato...'"
        [(valore)]="messaggio"
        [haErrore]="erroreMessaggio"
        [messaggioErrore]="'Il messaggio Ã¨ obbligatorio'">
      </app-input-checked>
    </div>

  </div>

</app-template-finestra-modale>

@if (erroreBanner) {
    <app-banner-errore [errore]="erroreBanner" (chiudi)="erroreBanner=''"></app-banner-errore>
  }
  @if (successoBanner) {
    <app-banner-errore [successo]="successoBanner" (chiudi)="successoBanner=''"></app-banner-errore>
  }