<app-intestazione-ebackground titolo="Panoramica FleetGo">
  <div class="grid grid-cols-1 gap-6 md:grid-cols-2 xl:grid-cols-4">

    <app-card-statistiche-dashboard-fleet
      titolo="Fatturato"
      [valore]="statistiche.guadagnoMensile"
      icona="bi-bank"
      descrizione="Valore generato questo mese">
    </app-card-statistiche-dashboard-fleet>

    <app-card-statistiche-dashboard-fleet
      (click)="sezioneFatturazione()"
      titolo="Da fatturare"
      [valore]="statistiche.fattureDaGenerare"
      icona="bi-briefcase"
      [descrizione]="'Fatture da generare!'">
    </app-card-statistiche-dashboard-fleet>

    <app-card-statistiche-dashboard-fleet
      (click)="sezioneFlotta()"
      titolo="Flotta a lavoro"
      percentuale="si"
      [valore]="percentualeNoleggiati"
      icona="bi-bar-chart-line"
      [descrizione]="descrizionePercentuale">
    </app-card-statistiche-dashboard-fleet>

    <app-card-statistiche-dashboard-fleet
      (click)=sezioneManutenzione()
      titolo="In Manutenzione"
      [valore]="statistiche.veicoliManutenzione"
      icona="bi-tools"
      descrizione="Veicoli non ancora a lavoro">
    </app-card-statistiche-dashboard-fleet>

  </div>

  <div class="grid grid-cols-1 md:grid-cols-2 gap-6 my-10">

    <div class="colonna-sx">
      <app-richieste-manutenzione-da-gestire id="sezioneManutezione"
                                             [richiesteManutenzioneDaGestire]="richiesteManutenzione"
                                             (inviaRichiesta)="caricaRichiestaManutenzione($event)">
      </app-richieste-manutenzione-da-gestire>
    </div>

    <div class="colonna-dx">
      <app-fatture-da-generare id="sezioneFatture"
                               [fatture]="fatture"
                               (generaFatturaEvent)="riceviFatturaDaGenerare($event)">
      </app-fatture-da-generare>
    </div>

  </div>

  @if(richiestaSelezionata){
    <app-gestisci-richiesta-manutenzione
      [datiRichiesta]="richiestaSelezionata"
      (close)="chiudiFinestraModale()"
      (accettaRichiesta)="accettaRichiestaManutenzione($event)"
      (rifiutaRichiesta)="rifiutaRichiesta($event)">
    </app-gestisci-richiesta-manutenzione>
  }

  @if(apriPaginaGenerazioneOfferte){
    <app-modale-generazione-fattura
      [modaleVisibile]="apriPaginaGenerazioneOfferte"
      [fattura]="fatturaDaGenerare"
      [offerteAttive]="offerteAttive"
      (chiudiPagina)="chiudiFinestraModaleGenerazioneFattura()"
      (confermaGenerazione)="generaFattura($event)">
    </app-modale-generazione-fattura>
  }
</app-intestazione-ebackground>
@if (erroreBanner) {
  <app-banner-errore [errore]="erroreBanner" (chiudi)="erroreBanner=''"></app-banner-errore>
}
@if(successoBanner){
  <app-banner-errore [successo]="successoBanner" (chiudi)="successoBanner=''"></app-banner-errore>
}

