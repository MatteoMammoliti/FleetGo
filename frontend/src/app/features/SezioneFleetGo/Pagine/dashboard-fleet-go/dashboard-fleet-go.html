<div class="dashboard-container">

  <h1 class="titolo-dashboard">Panoramica FleetGo</h1>

  <div class="griglia-kpi">

    <app-card-statistiche-dashboard-fleet
      titolo="Ricavi mese"
      [valore]="statistiche.guadagnoMensile"
      icona="bi-car-front"
      coloreSfondo="card-blue"
      descrizione="Guadagni di questo mese">
    </app-card-statistiche-dashboard-fleet>

    <app-card-statistiche-dashboard-fleet
      titolo="Da fatturare"
      [valore]="statistiche.fattureDaGenerare"
      icona="bi-briefcase"
      coloreSfondo="card-green"
      [descrizione]="'Fatture da generare!'">
    </app-card-statistiche-dashboard-fleet>

    <app-card-statistiche-dashboard-fleet
      titolo="Flotta utilizzata"
      [valore]="Math.floor (statistiche.veicoliAssegnati/statistiche.totaleVeicoli)*100"
      icona="bi-building"
      coloreSfondo="card-cyan"
      descrizione="'{{statistiche.veicoliAssegnati}} su {{statistiche.totaleVeicoli}}'">
    </app-card-statistiche-dashboard-fleet>

    <app-card-statistiche-dashboard-fleet
      titolo="In Manutenzione"
      [valore]="statistiche.veicoliManutenzione"
      icona="bi-tools"
      coloreSfondo="card-orange"
      descrizione="Richiede attenzione">
    </app-card-statistiche-dashboard-fleet>

  </div>

  <div class="griglia-operativa">

    <div class="colonna-sx">
      <app-richieste-manutenzione-da-gestire
        [richiesteManutenzioneDaGestire]="richiesteManutenzione"
        (inviaRichiesta)="caricaRichiestaManutenzione($event)">
      </app-richieste-manutenzione-da-gestire>
    </div>

    <div class="colonna-dx">
      <app-fatture-da-generare [fatture]="fatture"></app-fatture-da-generare>
    </div>

  </div>

  @if(richiestaSelezionata){
    <app-gestisci-richiesta-manutenzione
      [datiRichiesta]="richiestaSelezionata"
      (close)="chiudiFinestraModale()"
      (accettaRichiesta)="accettaRichiestaManutenzione($event)"
      (rifiutaRichiesta)="rifiutaRichiesta($event)">
    </app-gestisci-richiesta-manutenzione>
  }

</div>
