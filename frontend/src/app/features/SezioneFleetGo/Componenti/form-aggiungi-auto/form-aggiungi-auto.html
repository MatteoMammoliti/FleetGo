<div class="flex flex-col gap-6">

  <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
    
    <div class="flex flex-col gap-2">
      <label class="text-sm font-semibold text-blu ml-1">Targa Veicolo</label>
      <input type="text" 
             [(ngModel)]="targaVeicolo" 
             placeholder="Es. AB123CD"
             class="w-full px-4 py-3 rounded-xl border bg-slate-50 focus:bg-white transition-all outline-none focus:ring-2 focus:ring-blue-500/20 focus:border-blue-500"
             [class.border-red-500]="mappaErrori.targaVeicolo"
             [class.border-slate-200]="!mappaErrori.targaVeicolo">
    </div>

    <div class="flex flex-col gap-2">
      <label class="text-sm font-semibold text-blu ml-1">Modello</label>
      <input type="text" 
             [(ngModel)]="modello" 
             placeholder="Es. Citroen C3"
             class="w-full px-4 py-3 rounded-xl border bg-slate-50 focus:bg-white transition-all outline-none focus:ring-2 focus:ring-blue-500/20 focus:border-blue-500"
             [class.border-red-500]="mappaErrori.modello"
             [class.border-slate-200]="!mappaErrori.modello">
    </div>
  </div>

  <div class="flex flex-col gap-2 relative z-20">
    <label class="text-sm font-semibold text-blu ml-1">Alimentazione</label>
    
    <app-scelta-tendina
      [lista]="opzioniAlimentazione"
      [placeholder]="'Seleziona tipo...'"
      [valore]="tipoDistribuzioneVeicolo"
      (valoreChange)="impostaAlimentazione($event)">
    </app-scelta-tendina>
    
    @if (mappaErrori.tipoDistribuzioneVeicolo) {
      <span class="text-xs text-red-500 font-medium ml-1">Seleziona un'alimentazione</span>
    }
  </div>

  <div class="flex flex-col gap-2">
    <label class="text-sm font-semibold text-blu ml-1">Foto Veicolo</label>
    <div class="relative group cursor-pointer">
      <input id="fileInput" 
             type="file" 
             (change)="onFileSelected($event)" 
             accept="image/*"
             class="absolute inset-0 w-full h-full opacity-0 cursor-pointer z-10">
      
      <div class="w-full border-2 border-dashed rounded-xl p-6 flex flex-col items-center justify-center gap-2 transition-colors"
           [class.border-red-300]="mappaErrori.urlImmagine"
           [class.bg-red-50]="mappaErrori.urlImmagine"
           [class.border-slate-300]="!mappaErrori.urlImmagine"
           [class.group-hover:bg-slate-50]="!mappaErrori.urlImmagine"
           [class.group-hover:border-blue-400]="!mappaErrori.urlImmagine">
        
        @if (urlImmagine) {
          <i class="bi-check-circle-fill text-3xl text-green-500"></i>
          <span class="text-sm font-medium text-slate-700">{{ urlImmagine.name }}</span>
          <span class="text-xs text-slate-400">Clicca per cambiare foto</span>
        } @else {
          <i class="bi-cloud-arrow-up text-3xl text-grigio-scuro group-hover:text-blue-500 transition-colors"></i>
          <span class="text-sm font-medium text-slate-600 group-hover:text-blue-500">Clicca o trascina una foto qui</span>
        }
      </div>
    </div>
  </div>

  @if (errore) {
    <div class="bg-red-50 text-red-600 p-3 rounded-lg text-sm font-medium flex items-center gap-2 animate-shake">
      {{ errore }}
    </div>
  }

  <div class="flex justify-end pt-4 border-t border-slate-100 mt-2">
    <button (click)="onSubmit()" 
            class="bg-blue-600 hover:bg-blue-700 text-white font-semibold px-8 py-3 rounded-xl transition-all active:scale-95 flex items-center gap-2">
      <i class="bi-save"></i>
      Salva Veicolo
    </button>
  </div>

</div>