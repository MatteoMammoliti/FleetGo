<app-template-titolo-sottotitolo titolo="Prenotazioni Noleggio" sottotitolo="Visualizza lo storico e le richieste di noleggio dei tuoi dipendenti.">
    <div class="px-3">
      <div class="animate-fade-up animate-duration-1000">
        <app-banner-noleggi-da-approvare
          [noleggiDaApprovare]="numeroNoleggiDaApprovare"
          (apriModale)="gestisciVisibilitaModaleAccettazioneNoleggi()">
        </app-banner-noleggi-da-approvare>
      </div>

      <div class="bg-white p-5 rounded-xl shadow-sm border border-slate-200 mb-3">
        <div>
          <div class="grid grid-cols-1 sm:grid-cols-3 md:grid-cols-5 gap-4 items-end text-left">

            <div class="w-full mb-4">
              <label class="text-[11px] font-bold ml-1 mb-1 uppercase tracking-wide text-slate-700 block">
                Da Mese/Anno
              </label>
              <input type="month" [(ngModel)]="filtroDataInizio"
                     class="w-full px-4 py-2.5 rounded-xl border border-gray-200 bg-gray-50 outline-none transition-all
                focus:bg-white focus:border-azzurro focus:ring-2 focus:ring-azzurro/20 text-sm text-gray-700 font-medium">
            </div>

            <div class="w-full mb-4">
              <label class="text-[11px] font-bold ml-1 mb-1 uppercase tracking-wide text-slate-700 block">
                A Mese/Anno
              </label>
              <input type="month" [(ngModel)]="filtroDataFine"
                     class="w-full px-4 py-2.5 rounded-xl border border-gray-200 bg-gray-50 outline-none transition-all
                focus:bg-white focus:border-azzurro focus:ring-2 focus:ring-azzurro/20 text-sm text-gray-700 font-medium">
            </div>

            <div class="w-full">
              <app-scelta-tendina
                titolo="Stato Noleggio"
                [lista]="statiNoleggio"
                chiaveVisuale="etichetta"
                chiaveUtilizzata="id"
                [(valore)]="filtroStato">
              </app-scelta-tendina>
            </div>

          </div>
        </div>
      </div>

      <app-tabella-prenotazioni
        [richiesteNoleggio]="prenotazioniFiltrate"
        (apriDettaglio)="apriModale($event)">
      </app-tabella-prenotazioni>

      <app-modale-dettagli-prenotazione
        [prenotazione]="dettaglioDellaPrenotazione"
        [paginaVisibile]="modaleDettaglioAperto"
        (chiudiPagina)="chiudiModale()">
      </app-modale-dettagli-prenotazione>

      <app-modale-approvazione-noleggi
        [modaleAperto]="modaleAccettazioneAperto"
        [richiesteNoleggioDaApprovare]="richiesteDaApprovare"
        (chiudiModale)="gestisciVisibilitaModaleAccettazioneNoleggi()"
        (approvaRichiesta)="approvaRichiesta($event)"
        (rifiutaRichiesta)="rifiutaRichiesta($event)"
        (accettazioneConRifiuto)="apriModaleCheck($event)">
      </app-modale-approvazione-noleggi>
    </div>

</app-template-titolo-sottotitolo>


@if(mostraAlertConflitti){
  <app-template-finestra-modale
    titolo="Attenzione"
    [visibile]="'60'"
    tastoBianco="Annulla"
    tastoBlu="Conferma"
    (chiudi)="mostraAlertConflitti=false"
    (annulla)="mostraAlertConflitti=false"
    (conferma)="accettazioneConRifiuto()"
  >
    <label>Questo veicolo ha pi√π richieste in attesa di approvazione, accettando questa prenotazione le altre verranno automaticamente rifiutate.</label>
  </app-template-finestra-modale>
}
@if (erroreBanner) {
  <app-banner-errore [errore]="erroreBanner" (chiudi)="erroreBanner=''"></app-banner-errore>
}
@if(successoBanner){
  <app-banner-errore [successo]="successoBanner" (chiudi)="successoBanner=''"></app-banner-errore>
}
