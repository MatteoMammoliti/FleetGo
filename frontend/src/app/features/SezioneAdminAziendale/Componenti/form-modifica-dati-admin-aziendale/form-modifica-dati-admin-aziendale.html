<div class="bg-white rounded-2xl shadow-sm border border-slate-200 overflow-hidden h-full flex flex-col">

  <div class="p-6 border-b border-slate-100 bg-slate-50/50">
    <h3 class="text-lg font-bold text-slate-800 flex items-center gap-2">
      <i class="bi bi-person-lines-fill text-blue-600"></i> Dati Anagrafici
    </h3>
  </div>

  <div class="p-6 flex-1 overflow-y-auto">

    <div class="mb-6">
      <h4 class="text-xs font-bold text-slate-400 uppercase tracking-wider mb-4 flex items-center gap-2">
        Admin Responsabile
        <span class="h-px bg-slate-100 flex-1"></span>
      </h4>

      <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-4">
        <div class="flex flex-col gap-1.5">
          <label class="text-sm font-semibold text-slate-700">Nome</label>
          <input type="text" [(ngModel)]="nome"
                 class="w-full px-4 py-3 rounded-xl border bg-slate-50 focus:bg-white transition-all outline-none focus:ring-2 focus:ring-blue-500/20 focus:border-blue-500"
                 [class.border-red-300]="mappaErrori.nome"
                 [class.bg-red-50]="mappaErrori.nome">
        </div>
        <div class="flex flex-col gap-1.5">
          <label class="text-sm font-semibold text-slate-700">Cognome</label>
          <input type="text" [(ngModel)]="cognome"
                 class="w-full px-4 py-3 rounded-xl border bg-slate-50 focus:bg-white transition-all outline-none focus:ring-2 focus:ring-blue-500/20 focus:border-blue-500"
                 [class.border-red-300]="mappaErrori.cognome">
        </div>
      </div>

      <div class="flex flex-col gap-1.5 mb-4">
        <label class="text-sm font-semibold text-slate-700">Data di Nascita</label>
        <input type="date" [(ngModel)]="data"
               class="w-full px-4 py-3 rounded-xl border bg-slate-50 focus:bg-white transition-all outline-none focus:ring-2 focus:ring-blue-500/20 focus:border-blue-500 text-slate-600"
               [class.border-red-300]="mappaErrori.data">
      </div>

      <div class="flex flex-col gap-1.5">
        <label class="text-sm font-semibold text-slate-700">Email Aziendale</label>
        <input type="email" [(ngModel)]="email"
               class="w-full px-4 py-3 rounded-xl border bg-slate-50 focus:bg-white transition-all outline-none focus:ring-2 focus:ring-blue-500/20 focus:border-blue-500"
               [class.border-red-300]="mappaErrori.email">
      </div>
    </div>

    <div>
      <h4 class="text-xs font-bold text-slate-400 uppercase tracking-wider mb-4 flex items-center gap-2">
        Dati Azienda
        <span class="h-px bg-slate-100 flex-1"></span>
      </h4>

      <div class="flex flex-col gap-1.5 mb-4">
        <label class="text-sm font-semibold text-slate-700">Ragione Sociale</label>
        <input type="text" [(ngModel)]="nomeAzienda"
               class="w-full px-4 py-3 rounded-xl border bg-slate-50 focus:bg-white transition-all outline-none focus:ring-2 focus:ring-blue-500/20 focus:border-blue-500"
               [class.border-red-300]="mappaErrori.nomeAzienda">
      </div>

      <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
        <div class="flex flex-col gap-1.5">
          <label class="text-sm font-semibold text-slate-700">Partita IVA</label>
          <input type="text" [(ngModel)]="partitaIva"
                 class="w-full px-4 py-3 rounded-xl border bg-slate-50 focus:bg-white transition-all outline-none focus:ring-2 focus:ring-blue-500/20 focus:border-blue-500 font-mono"
                 [class.border-red-300]="mappaErrori.partitaIva">
        </div>

        <div class="flex flex-col gap-1.5">
          <label class="text-sm font-semibold text-slate-700">Sede Legale</label>
          <input type="text"
                 [value]="sedeAzienda ? sedeAzienda : 'Non impostata'"
                 readonly
                 class="w-full px-4 py-3 rounded-xl border border-slate-200 bg-slate-100 text-slate-500 cursor-not-allowed italic">
        </div>
      </div>

      <p class="text-[11px] text-slate-400 mt-2 flex items-center gap-1">
        <i class="bi bi-info-circle"></i> Per modificare la sede, usa la tabella a destra.
      </p>
    </div>

    @if (errore || erroreBackend) {
      <div class="mt-4 p-3 bg-red-50 border border-red-100 rounded-xl flex items-center gap-3 text-sm text-red-600 font-medium">
        <i class="bi bi-exclamation-triangle-fill"></i>
        <span>{{ errore || erroreBackend }}</span>
      </div>
    }

  </div>

  <div class="p-6 border-t border-slate-100 bg-slate-50/50 flex justify-end">
    <button (click)="onSalvaModifiche()"
            class="bg-blue-600 hover:bg-blue-700 text-white font-bold py-3 px-6 rounded-xl shadow-lg shadow-blue-500/20 transition-all active:scale-95 flex items-center gap-2">
      <i class="bi bi-check-lg text-lg"></i>
      Salva Modifiche
    </button>
  </div>
</div>
