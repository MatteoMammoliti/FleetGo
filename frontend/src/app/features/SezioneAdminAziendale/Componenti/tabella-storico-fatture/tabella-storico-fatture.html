<div class="bg-white rounded-xl shadow-sm border border-slate-200 overflow-hidden">
  <div class="overflow-x-auto">
    <table class="w-full text-left border-collapse">
      <thead>
      <tr class="bg-slate-50 text-slate-500 text-xs uppercase font-semibold tracking-wider">
        <th class="px-6 py-4 border-b border-slate-100">N. Fattura</th>
        <th class="px-6 py-4 border-b border-slate-100">Periodo</th>
        <th class="px-6 py-4 border-b border-slate-100">Importo</th>
        <th class="px-6 py-4 border-b border-slate-100">Stato</th>
        <th class="px-6 py-4 border-b border-slate-100 text-right">Azioni</th>
      </tr>
      </thead>
      <tbody class="text-sm text-slate-700 divide-y divide-slate-100">
        @for (f of fattureEmesse; track f.numeroFattura) {
          <tr class="hover:bg-slate-50 transition duration-150">
            <td class="px-6 py-4 font-medium text-slate-900">
              #{{ f.numeroFattura }}
            </td>

            <td class="px-6 py-4">
              {{ getNomeMese(f.meseFattura) }} {{ f.annoFattura }}
            </td>

            <td class="px-6 py-4 font-semibold">
              {{ f.costo | currency:'EUR':'symbol':'1.2-2' }}
            </td>

            <td class="px-6 py-4">
              @if (f.fatturaPagata) {
                <span class="inline-flex items-center gap-1 px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800 border border-green-200">
                  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" fill="currentColor" class="w-3 h-3">
                    <path fill-rule="evenodd" d="M12.416 3.376a.75.75 0 0 1 .208 1.04l-5 7.5a.75.75 0 0 1-1.154.114l-3-3a.75.75 0 0 1 1.06-1.06l2.353 2.353 4.493-6.74a.75.75 0 0 1 1.04-.207Z" clip-rule="evenodd" />
                  </svg>
                  Pagata
                </span>
              } @else {
                <span class="inline-flex items-center gap-1 px-2.5 py-0.5 rounded-full text-xs font-medium bg-amber-100 text-amber-800 border border-amber-200 animate-pulse">
                  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" fill="currentColor" class="w-3 h-3">
                    <path fill-rule="evenodd" d="M8 15A7 7 0 1 0 8 1a7 7 0 0 0 0 14ZM8 4a.75.75 0 0 1 .75.75v3a.75.75 0 0 1-1.5 0v-3A.75.75 0 0 1 8 4Zm0 8a1 1 0 1 0 0-2 1 1 0 0 0 0 2Z" clip-rule="evenodd" />
                  </svg>
                  Da Pagare
                </span>
              }
            </td>

            <td class="px-6 py-4 text-right flex justify-end gap-3 items-center">

              <button (click)="scaricaFattura.emit(f.numeroFattura)"
                      class="text-slate-400 hover:text-indigo-600 transition-colors"
                      title="Scarica PDF">
                <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-5 h-5">
                  <path stroke-linecap="round" stroke-linejoin="round" d="M3 16.5v2.25A2.25 2.25 0 0 0 5.25 21h13.5A2.25 2.25 0 0 0 21 18.75V16.5M16.5 12 12 16.5m0 0L7.5 12m4.5 4.5V3" />
                </svg>
              </button>

              @if (!f.fatturaPagata) {
                <button (click)="pagaFattura.emit(f.numeroFattura)"
                        class="bg-indigo-600 hover:bg-indigo-700 text-white text-xs font-medium px-4 py-2 rounded-lg shadow-sm transition-all hover:shadow-md active:scale-95 flex items-center gap-2">
                  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" class="w-4 h-4">
                    <path d="M10.75 4.75a.75.75 0 00-1.5 0v4.5h-4.5a.75.75 0 000 1.5h4.5v4.5a.75.75 0 001.5 0v-4.5h4.5a.75.75 0 000-1.5h-4.5v-4.5z" />
                  </svg>
                  Paga Ora
                </button>
              }
            </td>
          </tr>
        } @empty {
          <tr>
            <td colspan="5" class="px-6 py-12 text-center text-slate-400">
              <p class="text-base font-medium text-slate-900 mb-1">Nessuna fattura trovata</p>
              <p class="text-sm">Non hai ancora ricevuto fatture per il tuo abbonamento.</p>
            </td>
          </tr>
        }
      </tbody>
    </table>
  </div>
</div>
